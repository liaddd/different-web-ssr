{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{KbhL:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/signin/Authorization/AuthorizationStep2\",function(){return n(\"hDUg\")}])},hDUg:function(t,e,n){\"use strict\";n.r(e);var o=n(\"0iUn\"),a=n(\"sLSF\"),i=n(\"MI3g\"),r=n(\"a7VT\"),s=n(\"AT/M\"),u=n(\"Tit0\"),c=n(\"vYYK\"),h=n(\"q1tI\"),d=n.n(h),l=n(\"/MKj\"),p=n(\"TSYQ\"),m=n.n(p),b=n(\"LvDl\"),f=(n(\"V/xW\"),n(\"sFnd\")),v=n(\"ErnG\"),z=n(\"nOHt\"),k=n.n(z),g=n(\"cph9\"),O=d.a.createElement,S=function(t){function e(t){var n;return Object(o.a)(this,e),n=Object(i.a)(this,Object(r.a)(e).call(this,t)),Object(c.a)(Object(s.a)(n),\"state\",{seconds:59,error:void 0}),Object(c.a)(Object(s.a)(n),\"onSubmitForm\",function(t){if(t.preventDefault(),0!==n.state.seconds){var e=Object(s.a)(n),o=e.code1,a=e.code2,i=e.code3,r=e.code4,u=\"\".concat(o.value).concat(a.value).concat(i.value).concat(r.value),c={phone:n.props.user.phone,code:u,fcm_token:\"someKey\"};n.stopTimer(),n.props.onSetUserData({showModal:!0}),f.a.auth(c).then(function(t){t.data.showModal=!1,Object(g.c)(\"global_token\",t.data.auth.global_token),n.props.onSetUserData(t.data),n.props.user.showStepsAfterLogin?k.a.push(\"/personal-info\"):k.a.push(\"/\")}).catch(function(t){n.code1=d.a.createRef(),n.code2=d.a.createRef(),n.code3=d.a.createRef(),n.code4=d.a.createRef(),\"BLOCKED_USER\"===Object(b.get)(t,\"response.data.errorCode\")&&n.props.hendleBlockUser(),n.props.onSetUserData({showModal:!1}),n.setState({error:t.toString()})})}}),Object(c.a)(Object(s.a)(n),\"onChange\",function(t){t.target.value&&(n.onSubmitForm(t),n.code4.focus())}),n.code1=d.a.createRef(),n.code2=d.a.createRef(),n.code3=d.a.createRef(),n.code4=d.a.createRef(),n.startTimer=n.startTimer.bind(Object(s.a)(n)),n.stopTimer=n.stopTimer.bind(Object(s.a)(n)),n.countDown=n.countDown.bind(Object(s.a)(n)),n}return Object(u.a)(e,t),Object(a.a)(e,[{key:\"componentDidMount\",value:function(){this.startTimer()}},{key:\"startTimer\",value:function(){this.timer=setInterval(this.countDown,1e3)}},{key:\"stopTimer\",value:function(){this.timer&&clearInterval(this.timer)}},{key:\"countDown\",value:function(){var t=this.props.onSetUserData,e=this.state.seconds-1;0!==e?this.setState({seconds:e}):(this.stopTimer(),this.setState(function(t){return{seconds:0}}),t({successMessage:null}))}},{key:\"componentWillUnmount\",value:function(){this.stopTimer()}},{key:\"render\",value:function(){var t=this;return O(h.Fragment,null,O(\"div\",{className:\"authorization-block\"},O(\"div\",{className:\"authorization-block-form\"},O(\"div\",{className:\"authorization-block-title\"},O(\"div\",{className:\"authorization-title\"},\"\\u05d4\\u05d6\\u05df \\u05d0\\u05ea \\u05d4\\u05e7\\u05d5\\u05d3 \\u05e9\\u05e7\\u05d9\\u05d1\\u05dc\\u05ea\"),O(\"div\",{className:\"authorization-subtitle\"},\"\\u05d1SMS \\u05dc\\u05de\\u05e1\\u05e4\\u05e8 \",O(\"span\",{dir:\"ltr\"},this.props.user.phone))),O(\"form\",{className:\"authorization-form\",id:\"authorization-form\",onSubmit:function(e){return t.onSubmitForm(e)},noValidate:!0},O(\"div\",{className:\"authorization-block-input\",dir:\"ltr\"},O(\"input\",{className:\"authorization-input-number input-number authorization-input\",type:\"number\",autoFocus:!0,ref:function(e){return t.code1=e},onChange:function(){t.code2.focus()}}),O(\"input\",{className:\"authorization-input-number input-number authorization-input\",type:\"number\",ref:function(e){return t.code2=e},onChange:function(){t.code3.focus()}}),O(\"input\",{className:\"authorization-input-number input-number authorization-input\",type:\"number\",ref:function(e){return t.code3=e},onChange:function(){t.code4.focus()}}),O(\"input\",{className:\"authorization-input-number input-number authorization-input\",type:\"number\",ref:function(e){return t.code4=e},onChange:function(e){return t.onChange(e)}}),this.state.error?O(\"span\",{className:\"authorization-input-error\"},\"\\u05e7\\u05d5\\u05d3 \\u05e9\\u05d2\\u05d5\\u05d9\"):null),O(\"div\",{className:\"authorization-block-description\"},\"\\u05dc\\u05d0 \\u05d4\\u05d2\\u05d9\\u05e2? \\u05ea\\u05d5\\u05db\\u05dc \\u05dc\\u05e9\\u05dc\\u05d5\\u05d7 \\u05e9\\u05d5\\u05d1 \\u05d1\\u05d7\\u05dc\\u05d5\\u05e3 \\u05d3\\u05e7\\u05d4\"),O(\"div\",{className:\"authorization-block-submit\"},O(\"input\",{className:m()({\"authorization-timer-submit\":!0,\"input-submit\":!0,\"btn-grey\":0===this.state.seconds,\"btn-blue\":0!==this.state.seconds,\"btn-normal\":!0,\"btn-bold\":!0}),id:\"authorization-timer-submit\",type:\"submit\",value:this.checkCode?\"\\u05e9\\u05dc\\u05d9\\u05d7\\u05d4\":\"00:\".concat(this.state.seconds>9?this.state.seconds:\"0\".concat(this.state.seconds))}))))))}},{key:\"checkCode\",get:function(){var t=this.code1,e=this.code2,n=this.code3,o=this.code4;return t.value&&e.value&&n.value&&o.value}}]),e}(h.Component);e.default=Object(l.b)(function(t){return{user:t.user}},function(t){return{onSetUserData:function(e){t(v.a.setUserData(e))}}})(S)}},[[\"KbhL\",1,0,2]]]);"}
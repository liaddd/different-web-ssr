{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component, Fragment } from \"react\";\nimport Link from \"next/link\";\nimport Router from \"next/router\";\nimport { withRouter } from \"next/router\";\nimport { connect } from \"react-redux\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport { get } from \"lodash\";\nimport { getCookie } from \"../../utils/cookie\";\nimport Api from \"../../utils/requestClient/requests\";\nimport \"./Header.scss\";\nimport AccountComponent from \"./../Account/Account.component\";\nimport { logout } from \"../../actions/common/common.actions\";\nimport UserActions from \"../../actions/users/users.actions\";\nimport { stepper } from \"../../actions/forms/forms.actions\"; // MAIN_HEADER_CLASS is main header class\n\nvar MAIN_HEADER_CLASS = \"main-header\"; // ADDITIONAL_HEADER_CLASS detected scroll page for show static header\n\nvar ADDITIONAL_HEADER_CLASS = \"scroll\"; // DETECT_BROWSER_WITH detect browser with distance to detect show or hide toggleMenu inside header\n\nvar DETECT_BROWSER_WITH = 1024; // Header\n\nvar Header =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Header, _Component);\n\n  function Header(props) {\n    var _this;\n\n    _classCallCheck(this, Header);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Header).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      width: 0,\n      height: 0,\n      toggleButton: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_unbindScroll\", function () {\n      window.removeEventListener(\"scroll\", _this._handleScroll);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_bindScroll\", function () {\n      // Use passive event listener if available\n      var supportsPassive = false;\n\n      try {\n        var opts = _Object$defineProperty({}, \"passive\", {\n          get: function get() {\n            supportsPassive = true;\n          }\n        });\n\n        window.addEventListener(\"test\", null, opts);\n      } catch (e) {\n        console.log(\"ERROR:\", e);\n\n        if (get(e, \"response.data.errorCode\") === \"UNAUTHORIZED\") {\n          _this.props.onLogout();\n\n          Router.push(\"/\");\n        }\n      }\n\n      window.addEventListener(\"scroll\", _this._handleScroll, supportsPassive ? {\n        passive: true\n      } : false);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleScroll\", function () {\n      var top = document.documentElement.scrollTop || document.body.parentNode.scrollTop || document.body.scrollTop; // Test < 1 since Safari's rebound effect scrolls past the top\n\n      if (top < 1) {\n        var className = \"\".concat(MAIN_HEADER_CLASS);\n        _this._header.className = className;\n      } else {\n        var _className = \"\".concat(MAIN_HEADER_CLASS, \"  \").concat(ADDITIONAL_HEADER_CLASS);\n\n        _this._header.className = _className;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResize\", function (width, height) {\n      _this.setState(function (prevProps) {\n        return _objectSpread({}, prevProps, {\n          width: width,\n          height: height\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickToggleButton\", function (e) {\n      _this.setState(function (prevState) {\n        return _objectSpread({}, prevState, {\n          toggleButton: !prevState.toggleButton\n        });\n      });\n    });\n\n    _this._header = React.createRef();\n    return _this;\n  }\n\n  _createClass(Header, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._unbindScroll();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this._bindScroll();\n\n      this._handleScroll();\n\n      var global_token = getCookie(\"global_token\");\n\n      if (!this.props.userAuth && global_token) {\n        Api.authByToken(global_token).then(function (data) {\n          _this2.props.onSetUserData(data.data);\n        })[\"catch\"](function (err) {\n          console.error(\"Error get User\", err);\n        });\n      } // window.scrollTo(0, 0); //? scroll to top each time component is mounted.\n\n    } // _unbindScroll is remove detection header block position\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var activeLink = get(this.props, \"router.pathname\");\n      return __jsx(Fragment, null, __jsx(ReactResizeDetector, {\n        handleWidth: true,\n        handleHeight: true,\n        onResize: this.onResize\n      }, __jsx(\"header\", {\n        className: \"main-header\",\n        ref: function ref(_ref) {\n          _this3._header = _ref;\n        }\n      }, __jsx(\"div\", {\n        className: \"top-block-container\"\n      }, __jsx(\"div\", {\n        className: \"block-toggle-menu\"\n      }, __jsx(\"button\", {\n        className: \"toggle-menu\",\n        type: \"button\",\n        onClick: function onClick(e) {\n          return _this3.onClickToggleButton(e);\n        }\n      }, __jsx(\"span\", null))), __jsx(\"div\", {\n        className: \"block-logo\"\n      }, __jsx(Link, {\n        href: \"/\"\n      }, __jsx(\"a\", {\n        className: \"logo\"\n      }))), this.state.toggleButton || this.state.width > DETECT_BROWSER_WITH ? __jsx(\"nav\", {\n        className: \"main-menu container flex\"\n      }, __jsx(Link, {\n        href: \"/about-us\"\n      }, __jsx(\"a\", {\n        className: activeLink === \"/about-us\" ? \"menu-link active\" : \"menu-link\"\n      }, \"\\u05D0\\u05D5\\u05D3\\u05D5\\u05EA\\u05D9\\u05E0\\u05D5\")), __jsx(Link, {\n        href: \"/questions-and-answers\"\n      }, __jsx(\"a\", {\n        className: activeLink === \"/questions-and-answers\" ? \"menu-link active\" : \"menu-link\"\n      }, \" \", \"\\u05E9\\u05D0\\u05DC\\u05D5\\u05EA \\u05D5\\u05EA\\u05E9\\u05D5\\u05D1\\u05D5\\u05EA\")), __jsx(Link, {\n        href: \"/cabinet\"\n      }, __jsx(\"a\", {\n        className: activeLink === \"/cabinet\" ? \"menu-link active\" : \"menu-link\"\n      }, \"\\u05D4\\u05D0\\u05D6\\u05D5\\u05E8 \\u05D4\\u05D0\\u05D9\\u05E9\\u05D9 \\u05E9\\u05DC\\u05D9\")), __jsx(Link, {\n        href: \"/contact\"\n      }, __jsx(\"a\", {\n        className: activeLink === \"/contact\" ? \"menu-link active\" : \"menu-link\"\n      }, \"\\u05D9\\u05E6\\u05D9\\u05E8\\u05EA \\u05E7\\u05E9\\u05E8\")), __jsx(\"a\", {\n        href: \"https://blog.diffe-rent.co.il\",\n        className: \"menu-link\"\n      }, \"\\u05D4\\u05D1\\u05DC\\u05D5\\u05D2 \\u05E9\\u05DC\\u05E0\\u05D5\")) : null, __jsx(\"div\", {\n        className: \"block-link\"\n      }, this.props.userAuth ? __jsx(AccountComponent, null) : __jsx(Link, {\n        href: \"/signin\"\n      }, __jsx(\"a\", {\n        className: \"btn btn-white btn-medium\"\n      }, \" \\u05D0\\u05E0\\u05D9 \\u05D1\\u05E2\\u05DC \\u05D3\\u05D9\\u05E8\\u05D4\")))))));\n    }\n  }]);\n\n  return Header;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state,\n    userAuth: state.user.auth,\n    step: state.forms.stepper.activeStep\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onSetUserData: function onSetUserData(action) {\n      dispatch(UserActions.setUserData(action));\n    },\n    onSetStepper: function onSetStepper(action) {\n      dispatch(stepper(action));\n    },\n    onLogout: function onLogout(action) {\n      dispatch(logout(action));\n    }\n  };\n};\n\nvar withConnect = connect(mapStateToProps, mapDispatchToProps)(withRouter(Header));\nexport default withConnect;","map":null,"metadata":{},"sourceType":"module"}
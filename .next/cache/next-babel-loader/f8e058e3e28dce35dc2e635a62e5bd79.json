{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React, { Component, Fragment } from \"react\";\nimport Router from \"next/router\";\nimport \"./MyProfile.scss\";\nimport MyProfileEmpty from \"./MyProfileEmpty\";\nimport MyProfileWithOrders from \"./MyProfileWithOrders\";\nimport { connect } from \"react-redux\";\nimport { get } from \"lodash\";\nimport { setContractsData } from \"../../actions/users/users.actions\";\nimport API from \"../../utils/requestClient/requests\";\nimport { logout } from \"../../actions/common/common.actions\";\n\nvar MyProfile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MyProfile, _Component);\n\n  function MyProfile() {\n    _classCallCheck(this, MyProfile);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MyProfile).apply(this, arguments));\n  }\n\n  _createClass(MyProfile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this = this;\n\n      var token = get(this.props, \"user.auth.session_token\");\n\n      if (token) {\n        API.getContracts(token).then(function (res) {\n          _this.props.onSetContracts(res.data);\n        })[\"catch\"](function (e) {\n          console.log(\"error\", e);\n\n          if (get(e, \"response.data.errorCode\") === \"UNAUTHORIZED\") {\n            _this.props.onLogout();\n\n            Router.push(\"/\");\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          contracts = _this$props.contracts,\n          userAuth = _this$props.userAuth,\n          fName = _this$props.fName,\n          lName = _this$props.lName;\n      return __jsx(Fragment, null, __jsx(\"div\", {\n        className: \"bg-image myprofile-page\"\n      }, __jsx(\"div\", {\n        className: \"container\"\n      }, __jsx(\"div\", {\n        className: \"myprofile-header\"\n      }, __jsx(\"span\", {\n        className: \"myprofile-header-title\"\n      }, \"\\u05D4\\u05D3\\u05D9\\u05E8\\u05D5\\u05EA \\u05E9\\u05DC\\u05D9 \"), __jsx(\"span\", {\n        className: \"myprofile-sum\"\n      }, contracts ? contracts.length : 0)), contracts && contracts.length > 0 ? __jsx(MyProfileWithOrders, {\n        contracts: contracts,\n        lName: lName,\n        fName: fName\n      }) : __jsx(MyProfileEmpty, {\n        userAuth: userAuth\n      }))));\n    }\n  }]);\n\n  return MyProfile;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user,\n    contracts: state.user.contracts,\n    userAuth: state.user.userAuth,\n    fName: state.user.first_name,\n    lName: state.user.last_name\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onSetContracts: function onSetContracts(action) {\n      dispatch(setContractsData(action));\n    },\n    onLogout: function onLogout(action) {\n      dispatch(logout(action));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MyProfile);","map":{"version":3,"sources":["/Users/liadhorovitz/Desktop/SSR-different-web/pages/cabinet/MyProfile.js"],"names":["React","Component","Fragment","Router","MyProfileEmpty","MyProfileWithOrders","connect","get","setContractsData","API","logout","MyProfile","token","props","getContracts","then","res","onSetContracts","data","e","console","log","onLogout","push","contracts","userAuth","fName","lName","length","mapStateToProps","state","user","first_name","last_name","mapDispatchToProps","dispatch","action"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport Router from \"next/router\";\n\nimport \"./MyProfile.scss\";\nimport MyProfileEmpty from \"./MyProfileEmpty\";\nimport MyProfileWithOrders from \"./MyProfileWithOrders\";\nimport { connect } from \"react-redux\";\nimport { get } from \"lodash\";\nimport { setContractsData } from \"../../actions/users/users.actions\";\nimport API from \"../../utils/requestClient/requests\";\nimport { logout } from \"../../actions/common/common.actions\";\n\nclass MyProfile extends Component {\n  componentDidMount() {\n    const token = get(this.props, \"user.auth.session_token\");\n    if (token) {\n      API.getContracts(token)\n        .then(res => {\n          this.props.onSetContracts(res.data);\n        })\n        .catch(e => {\n          console.log(\"error\", e);\n          if (get(e, \"response.data.errorCode\") === \"UNAUTHORIZED\") {\n            this.props.onLogout();\n            Router.push(\"/\");\n          }\n        });\n    }\n  }\n\n  render() {\n    const { contracts, userAuth, fName, lName } = this.props;\n\n    return (\n      <Fragment>\n        <div className=\"bg-image myprofile-page\">\n          <div className=\"container\">\n            <div className=\"myprofile-header\">\n              <span className=\"myprofile-header-title\">הדירות שלי </span>\n              <span className=\"myprofile-sum\">\n                {contracts ? contracts.length : 0}\n              </span>\n            </div>\n            {contracts && contracts.length > 0 ? (\n              <MyProfileWithOrders\n                contracts={contracts}\n                lName={lName}\n                fName={fName}\n              />\n            ) : (\n              <MyProfileEmpty userAuth={userAuth} />\n            )}\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    contracts: state.user.contracts,\n    userAuth: state.user.userAuth,\n    fName: state.user.first_name,\n    lName: state.user.last_name\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onSetContracts: action => {\n      dispatch(setContractsData(action));\n    },\n    onLogout: action => {\n      dispatch(logout(action));\n    }\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyProfile);\n"]},"metadata":{},"sourceType":"module"}
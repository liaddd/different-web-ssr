{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component, Fragment } from \"react\";\nimport Router from \"next/router\";\nimport \"./MyProfile.scss\";\nimport MyProfileEmpty from \"./MyProfileEmpty\";\nimport MyProfileWithOrders from \"./MyProfileWithOrders\";\nimport { connect } from \"react-redux\";\nimport { get } from \"lodash\";\nimport { setContractsData } from \"../../actions/users/users.actions\";\nimport API from \"../../utils/requestClient/requests\";\nimport { logout } from \"../../actions/common/common.actions\";\n\nclass MyProfile extends Component {\n  componentDidMount() {\n    const token = get(this.props, \"user.auth.session_token\");\n\n    if (token) {\n      API.getContracts(token).then(res => {\n        this.props.onSetContracts(res.data);\n      }).catch(e => {\n        console.log(\"error\", e);\n\n        if (get(e, \"response.data.errorCode\") === \"UNAUTHORIZED\") {\n          this.props.onLogout();\n          Router.push(\"/\");\n        }\n      });\n    }\n  }\n\n  render() {\n    const {\n      contracts,\n      userAuth,\n      fName,\n      lName\n    } = this.props;\n    return __jsx(Fragment, null, __jsx(\"div\", {\n      className: \"bg-image myprofile-page\"\n    }, __jsx(\"div\", {\n      className: \"container\"\n    }, __jsx(\"div\", {\n      className: \"myprofile-header\"\n    }, __jsx(\"span\", {\n      className: \"myprofile-header-title\"\n    }, \"\\u05D4\\u05D3\\u05D9\\u05E8\\u05D5\\u05EA \\u05E9\\u05DC\\u05D9 \"), __jsx(\"span\", {\n      className: \"myprofile-sum\"\n    }, contracts ? contracts.length : 0)), contracts && contracts.length > 0 ? __jsx(MyProfileWithOrders, {\n      contracts: contracts,\n      lName: lName,\n      fName: fName\n    }) : __jsx(MyProfileEmpty, {\n      userAuth: userAuth\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    contracts: state.user.contracts,\n    userAuth: state.user.userAuth,\n    fName: state.user.first_name,\n    lName: state.user.last_name\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onSetContracts: action => {\n      dispatch(setContractsData(action));\n    },\n    onLogout: action => {\n      dispatch(logout(action));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MyProfile);","map":{"version":3,"sources":["/Users/liadhorovitz/Desktop/SSR-different-web/pages/cabinet/MyProfile.js"],"names":["React","Component","Fragment","Router","MyProfileEmpty","MyProfileWithOrders","connect","get","setContractsData","API","logout","MyProfile","componentDidMount","token","props","getContracts","then","res","onSetContracts","data","catch","e","console","log","onLogout","push","render","contracts","userAuth","fName","lName","length","mapStateToProps","state","user","first_name","last_name","mapDispatchToProps","dispatch","action"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport Router from \"next/router\";\n\nimport \"./MyProfile.scss\";\nimport MyProfileEmpty from \"./MyProfileEmpty\";\nimport MyProfileWithOrders from \"./MyProfileWithOrders\";\nimport { connect } from \"react-redux\";\nimport { get } from \"lodash\";\nimport { setContractsData } from \"../../actions/users/users.actions\";\nimport API from \"../../utils/requestClient/requests\";\nimport { logout } from \"../../actions/common/common.actions\";\n\nclass MyProfile extends Component {\n  componentDidMount() {\n    const token = get(this.props, \"user.auth.session_token\");\n    if (token) {\n      API.getContracts(token)\n        .then(res => {\n          this.props.onSetContracts(res.data);\n        })\n        .catch(e => {\n          console.log(\"error\", e);\n          if (get(e, \"response.data.errorCode\") === \"UNAUTHORIZED\") {\n            this.props.onLogout();\n            Router.push(\"/\");\n          }\n        });\n    }\n  }\n\n  render() {\n    const { contracts, userAuth, fName, lName } = this.props;\n\n    return (\n      <Fragment>\n        <div className=\"bg-image myprofile-page\">\n          <div className=\"container\">\n            <div className=\"myprofile-header\">\n              <span className=\"myprofile-header-title\">הדירות שלי </span>\n              <span className=\"myprofile-sum\">\n                {contracts ? contracts.length : 0}\n              </span>\n            </div>\n            {contracts && contracts.length > 0 ? (\n              <MyProfileWithOrders\n                contracts={contracts}\n                lName={lName}\n                fName={fName}\n              />\n            ) : (\n              <MyProfileEmpty userAuth={userAuth} />\n            )}\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    contracts: state.user.contracts,\n    userAuth: state.user.userAuth,\n    fName: state.user.first_name,\n    lName: state.user.last_name\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onSetContracts: action => {\n      dispatch(setContractsData(action));\n    },\n    onLogout: action => {\n      dispatch(logout(action));\n    }\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyProfile);\n"]},"metadata":{},"sourceType":"module"}
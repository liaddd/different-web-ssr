{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React, { Component, Fragment } from \"react\";\nimport Router from \"next/router\";\nimport \"./MyProfile.scss\";\nimport MyProfileEmpty from \"./MyProfileEmpty\";\nimport MyProfileWithOrders from \"./MyProfileWithOrders\";\nimport { connect } from \"react-redux\";\nimport { get } from \"lodash\";\nimport { setContractsData } from \"../../actions/users/users.actions\";\nimport API from \"../../utils/requestClient/requests\";\nimport { logout } from \"../../actions/common/common.actions\";\n\nvar MyProfile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MyProfile, _Component);\n\n  function MyProfile() {\n    _classCallCheck(this, MyProfile);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MyProfile).apply(this, arguments));\n  }\n\n  _createClass(MyProfile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this = this;\n\n      var token = get(this.props, \"user.auth.session_token\");\n\n      if (token) {\n        API.getContracts(token).then(function (res) {\n          _this.props.onSetContracts(res.data);\n        })[\"catch\"](function (e) {\n          console.log(\"error\", e);\n\n          if (get(e, \"response.data.errorCode\") === \"UNAUTHORIZED\") {\n            _this.props.onLogout();\n\n            Router.push(\"/\");\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          contracts = _this$props.contracts,\n          userAuth = _this$props.userAuth,\n          fName = _this$props.fName,\n          lName = _this$props.lName;\n      return __jsx(Fragment, null, __jsx(\"div\", {\n        className: \"bg-image myprofile-page\"\n      }, __jsx(\"div\", {\n        className: \"container\"\n      }, __jsx(\"div\", {\n        className: \"myprofile-header\"\n      }, __jsx(\"span\", {\n        className: \"myprofile-header-title\"\n      }, \"\\u05D4\\u05D3\\u05D9\\u05E8\\u05D5\\u05EA \\u05E9\\u05DC\\u05D9 \"), __jsx(\"span\", {\n        className: \"myprofile-sum\"\n      }, contracts ? contracts.length : 0)), contracts && contracts.length > 0 ? __jsx(MyProfileWithOrders, {\n        contracts: contracts,\n        lName: lName,\n        fName: fName\n      }) : __jsx(MyProfileEmpty, {\n        userAuth: userAuth\n      }))));\n    }\n  }]);\n\n  return MyProfile;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user,\n    contracts: state.user.contracts,\n    userAuth: state.user.userAuth,\n    fName: state.user.first_name,\n    lName: state.user.last_name\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onSetContracts: function onSetContracts(action) {\n      dispatch(setContractsData(action));\n    },\n    onLogout: function onLogout(action) {\n      dispatch(logout(action));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MyProfile);","map":null,"metadata":{},"sourceType":"module"}